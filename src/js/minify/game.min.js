$(function(){let e,n,t,o=[{question:"Thuốc súc miệng họng Medoral của MERAPGroup là sản phẩm điều trị & dự phòng các loại bệnh nào?",answer:["A. Dung dịch vệ sinh phụ nữ","B. Viêm họng, viêm lợi, loét miệng","C. Mắt mỏi/Mắt khô"],correct:"B"},{question:"Xưa hay vô thức lấy tay chùi mặt, nay tránh COVID-19 thì tay làm gì?",answer:["A. Nắm tay cầu nguyện","B. Đưa tay lên mắt, mũi, miệng","C. Rửa tay xà phòng thường xuyên"],correct:"C"},{question:"Các triệu chứng bạn sẽ tư vấn Dung dịch nhỏ mắt dưỡng ẩm tự nhiên Osla Online của MERAPGroup cho người mua thuốc?",answer:["A. Mắt sưng","B. Mắt nhắm","C. Khô mắt, chảy nước mắt, mắt nhìn mờ/nhòe"],correct:"C"},{question:"Cách sử dụng thuốc súc miệng họng Medoral của MERAPGroup?",answer:["A. Súc họng","B. Súc miệng","C. Cả A & B"],correct:"C"},{question:"Trước gặp nhau tay bắt mặt mừng, nay trong giai đoạn COVID-19 gặp nhau làm gì?",answer:["A. Làm thinh","B. Ôm hôn thắm thiết","C. Không vồ vập, không bắt tay"],correct:"C"},{question:"Sản phẩm dung dịch nhỏ mắt dưỡng ẩm tự nhiên của MERAPGroup tên là gì?",answer:["A. Osla Redi","B. Osla Online","C. Osla Cool"],correct:"B"},{question:"Hoạt chất Chlorhexidin trong thuốc súc miệng họng Medoral của MERAPGroup có tác dụng gì?",answer:["A. Diệt vi rút, vi khuẩn, nấm","B. Trị đau bao tử","C. Làm trắng và chắc răng"],correct:"A"},{question:"Trong giai đoạn dịch COVID-19, người luôn quan tâm, nhắn tin dặn dò giữ gìn sức khoẻ là ai?",answer:["A. Bộ Y Tế","B. Người ngoài","C. Người yêu cũ"],correct:"A"},{question:"Tên thành phần hoạt chất thế hệ mới trong dung dịch nhỏ mắt dưỡng ẩm tự nhiên Osla Online?",answer:["A. Clobetason Butyrat","B. Hyaluronate Sodium","C. Glycerol"],correct:"B"}],a={message:"SUBMIT_SUCCESS",game_left:1},i=$("#registration-profile"),s=$("#quiz-section"),l=$(".chat__holder"),c=$("#chat_hello"),u=$("#quiz-welcome-name"),r=$("#quiz-welcome-number"),h=$("#quiz-ques"),g=$("#quiz-a"),m=$("#quiz-b"),w=$("#quiz-c"),p=[],d=$("#res-holder"),T=$("#user-res"),f=$("#answer-holder"),M=$("#answer-input"),y=$("#quiz-button"),x=0,A=[],O={text:{}},C=$("#congrate-holder"),q=$("#answer-error"),S=$("#quiz-result"),v=$("#quiz-result-thankyou-1"),b=$("#quiz-result-thankyou-2"),k=$("#quiz-result-content"),B=$("#quiz-result-feedback"),z=$("#quiz-content"),I=function(){for(let e=0;e<l.length;e++){const n=l[e];TweenMax.set(n,{autoAlpha:0})}TweenMax.set(d,{autoAlpha:0}),y.on("click",V)},E=function(){for(let e=0;e<l.length;e++){const n=l[e],t=0+e/1;TweenMax.killTweensOf(n),TweenMax.to(n,.5,{autoAlpha:0,ease:Sine.easeOut,delay:t/10})}l.length;TweenMax.to(d,.5,{autoAlpha:0,ease:Sine.easeOut,delay:.5,onComplete:()=>{TweenMax.killTweensOf(f),TweenMax.to(f,.2,{autoAlpha:0,ease:Sine.easeOut,onComplete:L})}}),document.getElementById("quiz-section").scrollIntoView()},L=function(){if(x>=3)R();else{z.css("display","block"),console.log("this is running"),0==x?c.css("display","block"):c.css("display","none");const e=window.localStorage.getItem("username"),n=A[x];h.empty(),u.text(e),r.text(x+1),h.append("<strong>"+n.question+"</strong>"),p.forEach((e,t)=>{e.text(n.answer[t])}),function(){for(let e=0;e<l.length;e++){const n=l[e],t=0+e/9;console.log(t),TweenMax.killTweensOf(n),TweenMax.from(n,.5,{y:0,ease:Quint.easeOut}),TweenMax.to(n,.5,{autoAlpha:1,ease:Sine.easeOut,delay:t})}TweenMax.killTweensOf(f),TweenMax.to(f,.2,{autoAlpha:1,ease:Sine.easeOut,delay:0+(l.length-1)/9})}()}},R=function(){if(isLocal)_(a);else{const e=baseUrl+"game";$.ajax({headers:{Authorization:"Bearer "+window.localStorage.getItem("token")},type:"POST",contentType:"application/json",data:JSON.stringify(O),url:e,success:_,error:G})}},_=function(e){if("SUBMIT_SUCCESS"===e.message){const n=e.game_left,o="true"===window.localStorage.getItem("profile");K(n),D(),clearTimeout(t),t=setTimeout(()=>{TweenMax.killTweensOf(S),TweenMax.to(S,.3,{autoAlpha:0,ease:Sine.easeOut}),P(),o?U():N()},1e4)}},G=function(e){},D=function(){const e=window.localStorage.getItem("username");let n=0;const t=O.text;Object.values(t).map(e=>{e.userAnswer.toLowerCase()===e.correct.toLowerCase()&&(n+=1)});const o=n+"/3";let a="";const i=Number(window.localStorage.getItem("gameLeft"));n<=2&&(a="Bạn đã trả lời đúng <strong>"+o+"</strong> câu hỏi. Bạn còn <strong>"+i+"/3</strong> lượt chơi."),3===n&&(a="Chúc mừng "+e+", bạn trả lời đúng cả 3 câu. Bạn còn "+i+"/3 lượt chơi.");var s=$("#quiz-section").position();window.scrollTo({top:s.top,behavior:"smooth"}),k.empty(),k.append(a),z.css("display","none"),TweenMax.killTweensOf(B),TweenMax.killTweensOf(S),TweenMax.killTweensOf(v),TweenMax.killTweensOf(b),TweenMax.to(B,.3,{autoAlpha:1,ease:Sine.easeOut,display:"block"}),TweenMax.to(S,.3,{autoAlpha:1,ease:Sine.easeOut}),TweenMax.to(v,.3,{autoAlpha:1,ease:Sine.easeOut,delay:1}),TweenMax.to(b,.3,{autoAlpha:1,ease:Sine.easeOut,delay:2})},P=function(){s.css({position:"absolute",top:0,left:0,opacity:0,visibility:"hidden",height:"auto"})},N=function(){i.css({display:"block",position:"relative",top:0,left:0,opacity:1,visibility:"visible"})},U=function(){C.css({display:"block"})},V=function(){!function(){const e=M.val(),n=e.match(/[A-Ca-c]/g);return""!==e&&" "!==e&&n&&1===e.length}()?j():(O.text[x]=A[x],O.text[x].userAnswer=M.val(),T.text(M.val()),TweenMax.to(d,.5,{autoAlpha:1,ease:Sine.easeOut}),M.val(""),x+=1,clearTimeout(e),e=setTimeout(E,1e3))},j=function(){TweenMax.killTweensOf(q),q.text("Bạn vui lòng đọc hướng dẫn và soạn đúng cú pháp nhé!"),TweenMax.to(q,.3,{autoAlpha:1,ease:Sine.easeOut,onComplete:()=>{clearTimeout(n),n=setTimeout(H,5e3)}})},H=function(){TweenMax.to(q,.3,{autoAlpha:0,ease:Sine.easeOut})},K=function(e){window.localStorage.setItem("gameLeft",e)};p=[g,m,w],I(),window.addEventListener(MerapCustomEvent.START_GAME,()=>{x=0;const e=Math.round(Math.random()*(o.length-3));Math.random()>.5?(A=o.slice(e,e+3),o.splice(e,3)):(A=o.slice(e,e+3).reverse(),o.splice(e,3)),O={text:{}},A[0].question="Câu hỏi 1: "+A[0].question,A[1].question="Câu hỏi 2: "+A[1].question,A[2].question="Câu hỏi 3: "+A[2].question,L()})});