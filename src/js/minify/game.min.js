$(function(){let e,t,n,o=[{question:"Thuốc súc miệng họng Medoral của MERAPGroup là sản phẩm điều trị & dự phòng các loại bệnh nào?",answer:["A. Dung dịch vệ sinh phụ nữ","B. Viêm họng, viêm lợi, loét miệng","C. Mắt mỏi/Mắt khô"],correct:"B"},{question:"Xưa hay vô thức lấy tay chùi mặt, nay tránh COVID-19 thì tay làm gì?",answer:["A. Nắm tay cầu nguyện","B. Đưa tay lên mắt, mũi, miệng","C. Rửa tay xà phòng thường xuyên"],correct:"C"},{question:"Các triệu chứng bạn sẽ tư vấn Dung dịch nhỏ mắt dưỡng ẩm tự nhiên Osla Online của MERAPGroup cho người mua thuốc?",answer:["A. Mắt sưng","B. Mắt nhắm","C. Khô mắt, chảy nước mắt, mắt nhìn mờ/nhòe"],correct:"C"},{question:"Cách sử dụng thuốc súc miệng họng Medoral của MERAPGroup?",answer:["A. Súc họng","B. Súc miệng","C. Cả A & B"],correct:"C"},{question:"Trước gặp nhau tay bắt mặt mừng, nay trong giai đoạn COVID-19 gặp nhau làm gì?",answer:["A. Làm thinh","B. Ôm hôn thắm thiết","C. Không vồ vập, không bắt tay"],correct:"C"},{question:"Sản phẩm dung dịch nhỏ mắt dưỡng ẩm tự nhiên của MERAPGroup tên là gì?",answer:["A. Osla Redi","B. Osla Online","C. Osla Cool"],correct:"B"},{question:"Hoạt chất Chlorhexidin trong thuốc súc miệng họng Medoral của MERAPGroup có tác dụng gì?",answer:["A. Diệt vi rút, vi khuẩn, nấm","B. Trị đau bao tử","C. Làm trắng và chắc răng"],correct:"A"},{question:"Trong giai đoạn dịch COVID-19, người luôn quan tâm, nhắn tin dặn dò giữ gìn sức khoẻ là ai?",answer:["A. Bộ Y Tế","B. Người ngoài","C. Người yêu cũ"],correct:"A"},{question:"Tên thành phần hoạt chất thế hệ mới trong dung dịch nhỏ mắt dưỡng ẩm tự nhiên Osla Online?",answer:["A. Clobetason Butyrat","B. Hyaluronate Sodium","C. Glycerol"],correct:"B"}],a={message:"SUBMIT_SUCCESS",game_left:1},i=$("#registration-profile"),s=$("#quiz-section"),l=$(".chat__holder"),c=$("#chat_hello"),u=$("#quiz-welcome-name"),r=$("#quiz-welcome-number"),h=$("#quiz-ques"),g=$("#quiz-a"),m=$("#quiz-b"),w=$("#quiz-c"),d=[],p=$("#res-holder"),T=$("#user-res"),y=$("#answer-holder"),f=$("#answer-input"),M=$("#quiz-button"),A=0,x=[],C={text:{}},S=$("#congrate-holder"),q=$("#answer-error"),O=$("#quiz-result"),b=$("#quiz-result-thankyou-1"),v=$("#quiz-result-thankyou-2"),B=$("#quiz-result-content"),k=$("#quiz-result-feedback"),z=$("#quiz-content"),I=function(){for(let e=0;e<l.length;e++){const t=l[e];TweenMax.set(t,{autoAlpha:0})}TweenMax.set(p,{autoAlpha:0}),M.on("click",V)},E=function(){for(let e=0;e<l.length;e++){const t=l[e],n=0+e/1;TweenMax.killTweensOf(t),TweenMax.to(t,.5,{autoAlpha:0,ease:Sine.easeOut,delay:n/10})}l.length;TweenMax.to(p,.5,{autoAlpha:0,ease:Sine.easeOut,delay:.5,onComplete:()=>{TweenMax.killTweensOf(y),TweenMax.to(y,.2,{autoAlpha:0,ease:Sine.easeOut,onComplete:L})}}),document.getElementById("quiz-section").scrollIntoView()},L=function(){if(A>=3)R();else{z.css("display","block"),console.log("this is running"),0==A?c.css("display","block"):c.css("display","none");const e=window.localStorage.getItem("username"),t=x[A];u.text(e),r.text(A+1),h.text(t.question),d.forEach((e,n)=>{e.text(t.answer[n])}),function(){for(let e=0;e<l.length;e++){const t=l[e],n=0+e/1.5;console.log(n),TweenMax.to(t,.5,{autoAlpha:1,ease:Sine.easeOut,delay:n}),TweenMax.from(t,.5,{y:0,ease:Quint.easeOut})}TweenMax.killTweensOf(y),TweenMax.to(y,.2,{autoAlpha:1,ease:Sine.easeOut,delay:0+(l.length-1)/1})}()}},R=function(){if(isLocal)_(a);else{const e=baseUrl+"game";$.ajax({headers:{Authorization:"Bearer "+window.localStorage.getItem("token")},type:"POST",contentType:"application/json",data:JSON.stringify(C),url:e,success:_,error:G})}},_=function(e){if("SUBMIT_SUCCESS"===e.message){const t=e.game_left,o="true"===window.localStorage.getItem("profile");K(t),D(),clearTimeout(n),n=setTimeout(()=>{TweenMax.killTweensOf(O),TweenMax.to(O,.3,{autoAlpha:0,ease:Sine.easeOut}),P(),o?U():N()},15e3)}},G=function(e){},D=function(){const e=window.localStorage.getItem("username");let t=0;const n=C.text;Object.values(n).map(e=>{e.userAnswer.toLowerCase()===e.correct.toLowerCase()&&(t+=1)});const o=t+"/3";let a="";const i=Number(window.localStorage.getItem("gameLeft"));t<=2&&(a="Bạn đã trả lời đúng "+o+" câu hỏi. Bạn còn "+i+"/3 lượt chơi."),3===t&&(a="Chúc mừng "+e+", bạn trả lời đúng cả 3 câu. Bạn còn "+i+"/3 lượt chơi."),B.text(a),z.css("display","none"),TweenMax.to(k,.3,{autoAlpha:1,ease:Sine.easeOut,display:"block"}),TweenMax.to(O,.3,{autoAlpha:1,ease:Sine.easeOut}),TweenMax.to(b,.3,{autoAlpha:1,ease:Sine.easeOut,delay:1}),TweenMax.to(v,.3,{autoAlpha:1,ease:Sine.easeOut,delay:4})},P=function(){s.css({position:"absolute",top:0,left:0,opacity:0,visibility:"hidden",height:"auto"})},N=function(){i.css({display:"block",position:"relative",top:0,left:0,opacity:1,visibility:"visible"})},U=function(){S.css({display:"block"})},V=function(){!function(){const e=f.val(),t=e.match(/[A-Ca-c]/g);return""!==e&&" "!==e&&t&&1===e.length}()?j():(C.text[A]=x[A],C.text[A].userAnswer=f.val(),T.text(f.val()),TweenMax.to(p,.5,{autoAlpha:1,ease:Sine.easeOut}),f.val(""),A+=1,clearTimeout(e),e=setTimeout(E,1e3))},j=function(){TweenMax.killTweensOf(q),q.text("Bạn vui lòng đọc hướng dẫn và soạn đúng cú pháp nhé!"),TweenMax.to(q,.3,{autoAlpha:1,ease:Sine.easeOut,onComplete:()=>{clearTimeout(t),t=setTimeout(H,5e3)}})},H=function(){TweenMax.to(q,.3,{autoAlpha:0,ease:Sine.easeOut})},K=function(e){window.localStorage.setItem("gameLeft",e)};d=[g,m,w],I(),window.addEventListener(MerapCustomEvent.START_GAME,()=>{A=0;const e=Math.round(Math.random()*(o.length-3));Math.random()>.5?(x=o.slice(e,e+3),o.splice(e,3)):(x=o.slice(e,e+3).reverse(),o.splice(e,3)),C={text:{}},x[0].question="Câu hỏi 1: "+x[0].question,x[1].question="Câu hỏi 2: "+x[1].question,x[2].question="Câu hỏi 3: "+x[2].question,L()})});