$(function(){let n=[],e=[],i=0,a=0,o=[{id:25,name:"Q. Ba Đình"},{id:26,name:"Q. Cầu Giấy"},{id:27,name:"Q. Đống Đa"},{id:28,name:"Q. Hai Bà Trưng"},{id:29,name:"Q. Hoàn Kiếm"},{id:30,name:"Q. Long Biên"},{id:31,name:"Q. Tây Hồ"},{id:32,name:"Q. Thanh Xuân"},{id:33,name:"Q. Hoàng Mai"},{id:34,name:"H. Đông Anh"},{id:35,name:"H. Gia Lâm"},{id:36,name:"H. Sóc Sơn"},{id:37,name:"H. Thanh Trì"},{id:38,name:"H. Từ Liêm"},{id:629,name:"H. Chương Mỹ"},{id:630,name:"H. Đan Phượng"},{id:631,name:"Q. Hà Đông"},{id:632,name:"H. Hoài Đức"},{id:633,name:"H. Phú Xuyên"},{id:649,name:"H. Ba Vì"},{id:650,name:"T. Bắc Ninh"},{id:651,name:"T. Hà Tây"},{id:652,name:"T. Hưng Yên"},{id:653,name:"H. Mê Linh"},{id:654,name:"H. Mỹ Đức"},{id:655,name:"P. Nguyễn Tuân"},{id:656,name:"H. Quốc Oai"},{id:657,name:"TX. Sơn Tây"},{id:658,name:"X. Tân Triều"},{id:659,name:"H. Thạch Thất"},{id:660,name:"H. Văn Giang"},{id:663,name:"H. Thường Tín"},{id:675,name:"TT. Xuân Mai"},{id:676,name:"TT. Phú Minh"},{id:677,name:"H. Đông Ba"},{id:678,name:"Q. Hòa Bình"}],t={message:"Update success"},c=$("#registration-profile"),s=$("#profile-error"),d=$("#profile-button"),m="profile",r="login",l=0,h=["passport","username_facebook","email","province_id","district_id","address","company_name"],u={passport:"passport",username_facebook:"nick-facebook",email:"email",address:"work-address",company_name:"store-address"},g=$("#agreement-checkbox"),p={email:"Vui lòng nhập email của bạn",passport:"Vui lòng nhập số CMND để nhận giải thưởng",username_facebook:"Vui lòng nhập nick facebook của bạn để tham gia",province_id:"Bạn chưa chọn địa chỉ đang công tác",district_id:"Bạn chưa chọn địa chỉ đang công tác",address:"Bạn chưa nhập đầy đủ địa chỉ đang công tác",company_name:"Bạn chưa nhập đầy đủ địa chỉ đang công tác"},T={email:null,passport:null,username_facebook:null,province_id:null,district_id:null,address:null,company_name:null},f=$("#tnc-link"),w=$("#security-link"),H=$("#profile-guide"),y=$("#guide-button"),k=$("#profile-content"),B=$("#congrate-holder"),b=$("#congrate-button"),v=$("#congrate-title"),N=$("#congrate-message"),M=$("#quiz-section"),x=$("#quiz-result-feedback"),S=function(){_(),d.on("click",O),isLocal?(n=[{id:4,name:"Hà Nội"},{id:8,name:"TP. Hồ Chí Minh"},{id:76,name:"An Giang"},{id:64,name:"Bà Rịa Vũng Tàu"},{id:781,name:"Bắc Cạn"},{id:281,name:"Bắc Giang"},{id:240,name:"Bạc Liêu"},{id:241,name:"Bắc Ninh"},{id:75,name:"Bến Tre"},{id:650,name:"Bình Định"},{id:56,name:"Bình Dương"},{id:651,name:"Bình Phước"},{id:62,name:"Bình Thuận"},{id:780,name:"Cà Mau"},{id:710,name:"Cần Thơ"},{id:26,name:"Cao Bằng"},{id:511,name:"Đà Nẵng"},{id:500,name:"Đăk Lăk"},{id:501,name:"Đăk Nông"},{id:230,name:"Điện Biên"},{id:61,name:"Đồng Nai"},{id:67,name:"Đồng Tháp"},{id:59,name:"Gia Lai"},{id:219,name:"Hà Giang"},{id:351,name:"Hà Nam"},{id:43,name:"Hà Tây"},{id:39,name:"Hà Tĩnh"},{id:320,name:"Hải Dương"},{id:31,name:"Hải Phòng"},{id:711,name:"Hậu Giang"},{id:218,name:"Hòa Bình"},{id:321,name:"Hưng Yên"},{id:58,name:"Khánh Hòa"},{id:77,name:"Kiên Giang"},{id:60,name:"Kon Tum"},{id:231,name:"Lai Châu"},{id:25,name:"Lâm Đồng"},{id:20,name:"Lạng Sơn"},{id:63,name:"Lào Cai"},{id:72,name:"Long An"},{id:350,name:"Nam Định"},{id:38,name:"Nghệ An"},{id:30,name:"Ninh Bình"},{id:68,name:"Ninh Thuận"},{id:210,name:"Phú Thọ"},{id:57,name:"Phú Yên"},{id:52,name:"Quảng Bình"},{id:510,name:"Quảng Nam"},{id:55,name:"Quảng Ngãi"},{id:33,name:"Quảng Ninh"},{id:53,name:"Quảng Trị"},{id:79,name:"Sóc Trăng"},{id:22,name:"Sơn La"},{id:66,name:"Tây Ninh"},{id:36,name:"Thái Bình"},{id:280,name:"Thái Nguyên"},{id:282,name:"Thanh Hóa"},{id:37,name:"Thanh Hóa"},{id:54,name:"Thừa Thiên Huế"},{id:73,name:"Tiền Giang"},{id:74,name:"Trà Vinh"},{id:27,name:"Tuyên Quang"},{id:70,name:"Vĩnh Long"},{id:211,name:"Vĩnh Phúc"},{id:29,name:"Yên Bái"}],z()):D()},_=function(){f.on("click",()=>{$(".tnc__section").removeClass("active"),$("#condition-section").addClass("active")}),w.on("click",()=>{$(".tnc__section").removeClass("active"),$("#security-section").addClass("active")})},L=function(n,e){switch(n){case m:TweenMax.killTweensOf(s),TweenMax.to(s,.3,{alpha:1,ease:Sine.easeOut}),s.html(e);break;case r:TweenMax.killTweensOf(loginError),TweenMax.to(loginError,.3,{alpha:1,ease:Sine.easeOut}),loginError.html(e)}clearTimeout(l),l=setTimeout(Q,5e3,n)},Q=function(n){switch(n){case m:TweenMax.killTweensOf(s),TweenMax.to(s,.3,{alpha:0,ease:Sine.easeOut});break;case r:TweenMax.killTweensOf(loginError),TweenMax.to(loginError,.3,{alpha:0,ease:Sine.easeOut})}},O=function(){if(V(),A())if(g.prop("checked"))if(isLocal)C(t);else{const n=baseUrl+"profile";$.ajax({headers:{Authorization:"Bearer "+window.localStorage.getItem("token")},type:"POST",contentType:"application/json",data:JSON.stringify(T),url:n,success:C,error:E})}else L(m,"Bạn chưa đồng ý với điều khoản và thể lệ chương trình!")},C=function(n){"Update success"===n.message&&(window.localStorage.setItem("profile",!0),P(),G())},P=function(){c.css({position:"absolute",left:"-100%",top:"-100%",opacity:0,visibility:"hidden"})},G=function(){B.css({display:"block"})},E=function(n){const e=n.responseJSON;e.message?L(m,e.message):L(m,"Không thể đăng ký, vui lòng kiểm tra lại thông tin!")},V=function(){0!=i&&(T.province_id=i),0!=a&&(T.district_id=a),Object.keys(u).forEach(n=>{const e=$("#"+u[n]).val();T[n]=e}),console.log(T)},A=function(){const n=[];for(let e=0;e<h.length;e++){const i=h[e];if(null===T[i]||void 0===T[i]||""===T[i]){const e=p[i];if(!n.includes(i))return L(m,e),!1}}return!0},D=function(){const n=baseUrl+"province";$.ajax({type:"GET",url:n,success:K,error:j})},K=function(e){n=e,z()},j=function(n){const e=n.responseJSON;e.message?s.html(e.message):s.html("Please try again later!")},z=function(){const e=n.map(n=>n.name);new DropDownBox("dropdown-work-city",{itemArray:e,itemHeight:40},"Tỉnh/Thành Phố",R);y.on("click",J),b.on("click",U),Y()},U=function(){Number(window.localStorage.getItem("gameLeft"))>0?(P(),B.css({display:"none"}),setTimeout(I,100),x.css("display","none")):X()},X=function(){TweenMax.killTweensOf(N),TweenMax.to(N,.3,{autoAlpha:1,ease:Sine.easeOut}),$("#congrate-button-text").text("OK"),v.text("Bạn đã hết lượt chơi."),N.text("Hẹn gặp bạn ở chương trình sau!"),clearTimeout(void 0)},J=function(){q()},Y=function(){H.css({display:"block"}),k.css({opacity:0,visibility:"hidden"})},q=function(){H.css({display:"none"}),k.css({opacity:1,visibility:"visible"})},I=function(){M.css({position:"relative",opacity:1,visibility:"visible"}),window.dispatchEvent(StartGameEvent);const n=$(document).height()-$("#quiz-section").height()-100;$(window).scrollTop(n)},R=function(e){i=n.find(n=>n.name===e).id,a=0,isLocal?Z(o):F(i,Z)},F=function(n,e){const i=baseUrl+"province/"+n;$.ajax({type:"GET",url:i,success:e,error:W})},W=function(n){const e=n.responseJSON;e.message?s.html(e.message):s.html("Please try again later!")},Z=function(n){e=n;const i={itemArray:n.map(n=>n.name),itemHeight:40};new DropDownBox("dropdown-work-dist",i,"Quận/Huyện",nn)},nn=function(n){a=e.find(e=>e.name===n).id},en=function(){window.dropdownMap&&window.dropdownMap.size>0&&window.dropdownMap.forEach(n=>n.collapse())};window.addEventListener("click",en),S()});