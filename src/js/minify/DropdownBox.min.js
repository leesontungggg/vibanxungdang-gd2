"use strict";var DropDownBox=function(t,e,i,o){this.holderID=t,this.parent=document.getElementById(t);var s=this.parent.getElementsByClassName("dropdown__box")[0];if(s&&this.parent.removeChild(s),this.holder=document.createElement("ul"),this.holder.className="dropdown__box",this.holder.style.overflowY="hidden",this.itemArray=[],this.onClickCb=o,this.arrow=this.parent.getElementsByClassName("dropdown__box__arrow")[0],void 0!==this.parent){if(this.defaults={numReveal:5,showFull:!1,itemHeight:30,itemArray:[0,1,2,3,4,5,6,7],className:"dropdown__item",txtClassName:"dropdown__item__txt",DDItemTemplate:'<p class="dropdown__item__txt"></p>',linkArray:[]},this.options={},Object.assign(this.options,this.defaults,e),void 0!==i)this.options.itemArray.unshift(i);else{var n=this.options.itemArray[0];this.options.itemArray.unshift(n)}0<this.options.linkArray.length&&this.options.linkArray.unshift(" "),this.numReveal=this.options.itemArray.length,this.options.showFull?this.options.numReveal=this.options.itemArray.length:this.options.numReveal=Math.min(this.options.numReveal,this.options.itemArray.length),this.holder.style.height="100%",this.holder.style.maxHeight=this.options.itemHeight+"px",this.isExpand=!1,this.totalHeight=50,this.init(),this.addEvent(),this.registerToWindow()}};DropDownBox.prototype.registerToWindow=function(){window.dropdownMap?0<window.dropdownMap.size&&window.dropdownMap.has(this.holderID)&&window.dropdownMap.delete(this.holderID):window.dropdownMap=new Map,window.dropdownMap.set(this.holderID,this)},DropDownBox.prototype.init=function(){for(var t=0;t<this.options.itemArray.length;t++){var e=document.createElement("li");e.className=this.options.className,e.setAttribute("itemID",t),e.innerHTML=this.options.DDItemTemplate,this.holder.appendChild(e);var i=e.getElementsByClassName(this.options.txtClassName)[0];1<this.options.linkArray.length&&(i.href=this.options.linkArray[t]),i.innerHTML=this.options.itemArray[t],i.style.lineHeight=this.parent.offsetHeight+"px",0==t&&(this.placeHolder=i),this.itemArray.push(e)}this.parent.appendChild(this.holder),this.totalHeight=(this.options.itemHeight+1)*this.options.numReveal},DropDownBox.prototype.addEvent=function(){window.removeEventListener("resize",this.fnResize),window.addEventListener("resize",this.fnResize.bind(this)),this.holder.addEventListener("click",this.expand.bind(this))},DropDownBox.prototype.expand=function(t){var i=this;t.stopPropagation(),window.dropdownMap&&0<window.dropdownMap.size&&window.dropdownMap.forEach(function(t,e){e!==i.holderID&&t.collapse()});var e=this,o=t.target,s=t.target.getAttribute("itemID"),n=o.getElementsByClassName(e.options.txtClassName)[0];0<this.options.linkArray.length&&""!=n.href&&"A"==n.tagName&&0!=s&&(window.location=n.href);var r=t.target.getElementsByClassName(e.options.txtClassName)[0].innerHTML;e.placeHolder.innerHTML=r,void(this.holder.scrollTop=0)!==e.onClickCb&&0!=s&&e.onClickCb(r),e.toggleExpand(e)},DropDownBox.prototype.collapse=function(){this.holder.style.height="100%",TweenMax.killTweensOf(this.holder),TweenMax.to(this.holder,.5,{maxHeight:this.options.itemHeight,ease:Quint.easeOut}),this.options.numReveal<this.options.itemArray.length&&(this.holder.style.overflowY="hidden"),void 0!==this.arrow&&(TweenMax.killTweensOf(this.arrow),TweenMax.to(this.arrow,.3,{alpha:1,ease:Sine.easeOut})),this.holder.scrollTop=0,this.isExpand=!1},DropDownBox.prototype.toggleExpand=function(t){var e=!t.isExpand,i=e?"auto":"100%",o=e?t.totalHeight:t.options.itemHeight,s=e?"scroll":"hidden",n=e?0:1;t.holder.style.height=i,TweenMax.killTweensOf(t.holder),TweenMax.to(t.holder,.5,{maxHeight:o,ease:Quint.easeOut}),t.options.numReveal<t.options.itemArray.length&&(t.holder.style.overflowY=s),void 0!==t.arrow&&(TweenMax.killTweensOf(t.arrow),TweenMax.to(t.arrow,.3,{alpha:n,ease:Sine.easeOut})),t.isExpand=e},DropDownBox.prototype.fnResize=function(){for(var t=this.parent.offsetHeight,e=0;e<this.itemArray.length;e++){this.itemArray[e].getElementsByClassName(this.options.txtClassName)[0].style.lineHeight=t+"px"}},DropDownBox.prototype.getCurrentValue=function(){return this.placeHolder.innerHTML};